<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>The Storm – U10 Fall Soccer: Availability Poll</title>
  <style>
    :root{
      /* Storm colors */
      --bg:#0a0a0a;               /* page background */
      --card:#141414;             /* card background */
      --ink:#f5f5f5;              /* main text */
      --muted:#cfcfcf;            /* muted text */
      --brand:#e11d2e;            /* red */
      --brand-2:#b91c1c;          /* darker red */
      --ok:#16a34a;               /* green */
      --err:#ef4444;              /* error red */
      --shadow: 0 10px 30px rgba(0,0,0,.5), 0 2px 8px rgba(0,0,0,.35);
      --radius:18px;
    }
    html,body{height:100%;}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji;
      color:var(--ink);
      background:radial-gradient(1200px 800px at 10% 10%, #1f1f1f 0%, #0a0a0a 60%),
                 radial-gradient(1200px 800px at 90% 90%, #1a1a1a 0%, #0a0a0a 60%), var(--bg);
      display:grid; place-items:center; padding:24px;
    }
    .card{
      width:min(760px, 100%);
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.12);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden
    }
    .header{
      padding:28px 28px 16px;
      background:linear-gradient(135deg, rgba(225,29,46,.12), rgba(185,28,28,.12));
      border-bottom:1px solid rgba(255,255,255,.12);
      text-align:center
    }
    h1{margin:8px 0 6px; font-size: clamp(22px, 2.2vw, 28px); letter-spacing:.2px}
    .sub{margin:0; color:var(--muted); font-size:14px}
    .crest{
      width:96px;height:96px;border-radius:22%;
      box-shadow:0 6px 18px rgba(0,0,0,.35);
      display:block;margin:0 auto 8px;object-fit:cover;border:1px solid rgba(255,255,255,.25)
    }

    .content{display:grid; gap:22px; padding:22px;}
    form{display:grid; gap:14px}
    .option{
      display:flex; gap:12px; align-items:flex-start; padding:14px;
      border:1px solid rgba(255,255,255,.16); border-radius:12px; background:rgba(255,255,255,.03)
    }
    .option:hover{border-color: rgba(225,29,46,.55); background: rgba(225,29,46,.10)}
    input[type="radio"]{margin-top:2px;}
    .label{font-weight:700}
    .buttons{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    button{
      appearance:none; border:0; padding:12px 16px; border-radius:12px;
      cursor:pointer; font-weight:800; letter-spacing:.2px
    }
    .primary{background: linear-gradient(135deg, var(--brand), var(--brand-2)); color:#fff}
    .ghost{background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,.18)}
    .small{padding:8px 10px; font-weight:700; border-radius:10px}

    .results{display:grid; gap:16px}
    .bar{background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.16); border-radius:12px; overflow:hidden}
    .barfill{height:16px; width:0%; background:linear-gradient(90deg, var(--brand), var(--brand-2)); transition:width .6s cubic-bezier(.22,1,.36,1)}
    .row{display:flex; justify-content:space-between; gap:12px; font-size:14px; color:var(--muted); margin-bottom:6px}
    .totals{display:flex; gap:10px; align-items:center; color:var(--muted); font-size:13px}
    .tag{border:1px solid rgba(255,255,255,.18); padding:6px 10px; border-radius:999px}

    .notice{display:none; border-left:4px solid var(--ok); background:rgba(34,197,94,.12); color:#d1fae5; padding:12px 14px; border-radius:12px}
    .notice.error{border-left-color: var(--err); background: rgba(239,68,68,.12); color:#fee2e2}

    .footer{padding:16px 22px 22px; color:var(--muted); font-size:12px; display:flex; justify-content:space-between; align-items:center}
    .link{color:#fca5a5; text-decoration:underline; text-underline-offset:2px}
    .hidden{display:none}
  </style>
</head>
<body>
  <main class="card" role="main">
    <div class="header">
      <!-- Swap src with your data-URI or URL if you prefer -->
      <img class="crest" src="storm-logo.png" alt="The Storm FC crest" />
      <h1>The Storm – U10 Fall Soccer: Availability Poll</h1>
      <p class="sub">Pick one option and hit “Submit Vote.” Results update instantly. (Saved only in this browser.)</p>
    </div>

    <div class="content" aria-live="polite">
      <div id="alert" class="notice" role="status">Thanks — your vote was recorded.</div>
      <div id="alert-error" class="notice error" role="alert">Please select an option before submitting.</div>

      <form id="pollForm">
        <label class="option">
          <input type="radio" name="choice" value="1" aria-label="Monday is the only day that works" />
          <div><div class="label">1) Monday is the only day that works</div></div>
        </label>

        <label class="option">
          <input type="radio" name="choice" value="2" aria-label="Monday or Tuesday are both fine" />
          <div><div class="label">2) Monday or Tuesday are both fine</div></div>
        </label>

        <label class="option">
          <input type="radio" name="choice" value="3" aria-label="Tuesday would work better" />
          <div><div class="label">3) Tuesday would work better</div></div>
        </label>

        <div class="buttons">
          <button type="submit" class="primary" id="submitBtn">Submit Vote</button>
          <button type="button" class="ghost" id="showResultsBtn">Show Results</button>
          <button type="button" class="ghost small" id="resetBtn" title="Clears votes saved in this browser only">Reset (this browser)</button>
        </div>
      </form>

      <section class="results" aria-labelledby="resultsHeading">
        <h2 id="resultsHeading" class="hidden">Results</h2>

        <div class="row"><span>1) Monday is the only day that works</span><span id="pct1">0%</span></div>
        <div class="bar" aria-hidden="true"><div id="bar1" class="barfill"></div></div>

        <div class="row"><span>2) Monday or Tuesday are both fine</span><span id="pct2">0%</span></div>
        <div class="bar" aria-hidden="true"><div id="bar2" class="barfill"></div></div>

        <div class="row"><span>3) Tuesday would work better</span><span id="pct3">0%</span></div>
        <div class="bar" aria-hidden="true"><div id="bar3" class="barfill"></div></div>

        <div class="totals"><span class="tag" id="totalVotes">0 votes</span><span id="status"></span></div>
      </section>
    </div>

    <div class="footer">
      <span>Private to this browser. For team-wide totals, host this and connect a backend (I can add Google Sheets or Supabase).</span>
      <a class="link" href="#" id="exportBtn" title="Download current votes as JSON">Export</a>
    </div>
  </main>

  <script>
    const STORAGE_KEY = 'stormU10.poll.v1';
    const VOTED_KEY = 'stormU10.poll.v1.voted';

    const alertOk = document.getElementById('alert');
    const alertErr = document.getElementById('alert-error');
    const totalVotesEl = document.getElementById('totalVotes');
    const statusEl = document.getElementById('status');
    const bars = [null, document.getElementById('bar1'), document.getElementById('bar2'), document.getElementById('bar3')];
    const pcts = [null, document.getElementById('pct1'), document.getElementById('pct2'), document.getElementById('pct3')];

    function getState(){
      let s = localStorage.getItem(STORAGE_KEY);
      if(!s){
        const init = { votes: {1:0,2:0,3:0}, lastUpdated: new Date().toISOString() };
        localStorage.setItem(STORAGE_KEY, JSON.stringify(init));
        return init;
      }
      try { return JSON.parse(s); } catch {
        const reset = { votes: {1:0,2:0,3:0}, lastUpdated: new Date().toISOString() };
        localStorage.setItem(STORAGE_KEY, JSON.stringify(reset));
        return reset;
      }
    }
    function setState(next){
      next.lastUpdated = new Date().toISOString();
      localStorage.setItem(STORAGE_KEY, JSON.stringify(next));
    }
    function fmtPct(part, total){
      if(total <= 0) return '0%';
      const pct = Math.round((part/total)*100);
      return pct + '%';
    }
    function render(){
      const s = getState();
      const total = s.votes[1] + s.votes[2] + s.votes[3];
      const voted = localStorage.getItem(VOTED_KEY) === 'true';

      pcts[1].textContent = fmtPct(s.votes[1], total);
      pcts[2].textContent = fmtPct(s.votes[2], total);
      pcts[3].textContent = fmtPct(s.votes[3], total);
      bars[1].style.width = total? (s.votes[1]/total*100)+'%':'0%';
      bars[2].style.width = total? (s.votes[2]/total*100)+'%':'0%';
      bars[3].style.width = total? (s.votes[3]/total*100)+'%':'0%';
      totalVotesEl.textContent = total + (total === 1 ? ' vote' : ' votes');
      statusEl.textContent = voted ? 'You have voted.' : '';
    }
    function clearAlerts(){ alertOk.style.display='none'; alertErr.style.display='none'; }

    document.getElementById('pollForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      clearAlerts();
      const formData = new FormData(e.currentTarget);
      const choice = formData.get('choice');
      if(!choice){ alertErr.style.display='block'; return; }
      if(localStorage.getItem(VOTED_KEY) === 'true'){
        alertOk.textContent = 'You already voted in this browser.';
        alertOk.style.display='block';
        return;
      }
      const s = getState();
      s.votes[choice] = (s.votes[choice]||0) + 1;
      setState(s);
      localStorage.setItem(VOTED_KEY, 'true');
      alertOk.textContent = 'Thanks — your vote was recorded.';
      alertOk.style.display='block';
      render();
    });

    document.getElementById('showResultsBtn').addEventListener('click', render);

    document.getElementById('resetBtn').addEventListener('click', ()=>{
      clearAlerts();
      if(confirm('Reset votes stored in this browser? This does not affect anyone else.')){
        localStorage.removeItem(STORAGE_KEY);
        localStorage.removeItem(VOTED_KEY);
        render();
      }
    });

    document.getElementById('exportBtn').addEventListener('click', (e)=>{
      e.preventDefault();
      const data = new Blob([localStorage.getItem(STORAGE_KEY)||'{}'], {type:'application/json'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(data);
      a.download = 'storm-u10-poll-results.json';
      document.body.appendChild(a);
      a.click();
      URL.revokeObjectURL(a.href);
      a.remove();
    });

    // Render on load
    render();
  </script>
</body>
</html>